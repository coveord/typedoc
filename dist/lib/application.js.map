{"version":3,"file":"application.js","sourceRoot":"","sources":["../../src/lib/application.ts"],"names":[],"mappings":"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","sourcesContent":["import { LinkParser } from './utils/LinkParser';\r\nimport marked = require('marked');\r\nimport highlight = require('highlight.js');\r\n\r\n/**\r\n * The TypeDoc main module and namespace.\r\n *\r\n * The [[Application]] class holds the core logic of the cli application. All code related\r\n * to resolving reflections is stored in [[TypeDoc.Factories]], the actual data models can be found\r\n * in [[TypeDoc.Models]] and the final rendering is defined in [[TypeDoc.Output]].\r\n */\r\n\r\nimport * as Path from 'path';\r\nimport * as FS from 'fs';\r\nimport * as typescript from 'typescript';\r\nimport { Minimatch, IMinimatch } from 'minimatch';\r\n\r\nimport { Converter } from './converter/index';\r\nimport { Renderer } from './output/renderer';\r\nimport { Serializer } from './serialization';\r\nimport { ProjectReflection } from './models/index';\r\nimport { Logger, ConsoleLogger, CallbackLogger, PluginHost, writeFile } from './utils/index';\r\n\r\nimport { AbstractComponent, ChildableComponent, Component, Option } from './utils/component';\r\nimport { Options, OptionsReadMode, OptionsReadResult } from './utils/options/index';\r\nimport { ParameterType } from './utils/options/declaration';\r\n\r\n/**\r\n * The default TypeDoc main application class.\r\n *\r\n * This class holds the two main components of TypeDoc, the [[Dispatcher]] and\r\n * the [[Renderer]]. When running TypeDoc, first the [[Dispatcher]] is invoked which\r\n * generates a [[ProjectReflection]] from the passed in source files. The\r\n * [[ProjectReflection]] is a hierarchical model representation of the TypeScript\r\n * project. Afterwards the model is passed to the [[Renderer]] which uses an instance\r\n * of [[BaseTheme]] to generate the final documentation.\r\n *\r\n * Both the [[Dispatcher]] and the [[Renderer]] are subclasses of the [[EventDispatcher]]\r\n * and emit a series of events while processing the project. Subscribe to these Events\r\n * to control the application flow or alter the output.\r\n */\r\n@Component({ name: 'application', internal: true })\r\nexport class Application extends ChildableComponent<Application, AbstractComponent<Application>> {\r\n    options: Options;\r\n\r\n    /**\r\n     * The converter used to create the declaration reflections.\r\n     */\r\n    converter: Converter;\r\n\r\n    /**\r\n     * The renderer used to generate the documentation output.\r\n     */\r\n    renderer: Renderer;\r\n\r\n    /**\r\n     * The serializer used to generate JSON output.\r\n     */\r\n    serializer: Serializer;\r\n\r\n    /**\r\n     * The logger that should be used to output messages.\r\n     */\r\n    logger: Logger;\r\n\r\n    plugins: PluginHost;\r\n\r\n    notSupportedFeaturesConfig: {};\r\n\r\n    @Option({\r\n        name: 'logger',\r\n        help: 'Specify the logger that should be used, \\'none\\' or \\'console\\'',\r\n        defaultValue: 'console',\r\n        type: ParameterType.Mixed\r\n    })\r\n    loggerType: string | Function;\r\n\r\n    @Option({\r\n        name: 'ignoreCompilerErrors',\r\n        help: 'Should TypeDoc generate documentation pages even after the compiler has returned errors?',\r\n        type: ParameterType.Boolean\r\n    })\r\n    ignoreCompilerErrors: boolean;\r\n\r\n    @Option({\r\n        name: 'exclude',\r\n        help: 'Define patterns for excluded files when specifying paths.',\r\n        type: ParameterType.Array\r\n    })\r\n    exclude: Array<string>;\r\n\r\n    /**\r\n     * The version number of TypeDoc.\r\n     */\r\n    static VERSION = '{{ VERSION }}';\r\n\r\n    /**\r\n     * Create a new TypeDoc application instance.\r\n     *\r\n     * @param options An object containing the options that should be used.\r\n     */\r\n    constructor(options?: Object) {\r\n        super(null);\r\n\r\n        this.logger = new ConsoleLogger();\r\n        this.converter = this.addComponent<Converter>('converter', Converter);\r\n        this.serializer = this.addComponent<Serializer>('serializer', Serializer);\r\n        this.renderer = this.addComponent<Renderer>('renderer', Renderer);\r\n        this.plugins = this.addComponent('plugins', PluginHost);\r\n        this.options = this.addComponent('options', Options);\r\n\r\n        this.bootstrap(options);\r\n\r\n        this.notSupportedFeaturesConfig = (<any> options).notSupportedFeaturesConfig;\r\n    }\r\n\r\n    /**\r\n     * Initialize TypeDoc with the given options object.\r\n     *\r\n     * @param options  The desired options to set.\r\n     */\r\n    protected bootstrap(options?: Object): OptionsReadResult {\r\n        this.options.read(options, OptionsReadMode.Prefetch);\r\n\r\n        const logger = this.loggerType;\r\n        if (typeof logger === 'function') {\r\n            this.logger = new CallbackLogger(<any> logger);\r\n        } else if (logger === 'none') {\r\n            this.logger = new Logger();\r\n        }\r\n\r\n        this.plugins.load();\r\n        return this.options.read(this.options.getRawValues(), OptionsReadMode.Fetch);\r\n    }\r\n\r\n    /**\r\n     * Return the application / root component instance.\r\n     */\r\n    get application(): Application {\r\n        return this;\r\n    }\r\n\r\n    get isCLI(): boolean {\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Return the path to the TypeScript compiler.\r\n     */\r\n    public getTypeScriptPath(): string {\r\n        return Path.dirname(require.resolve('typescript'));\r\n    }\r\n\r\n    public getTypeScriptVersion(): string {\r\n        const tsPath = this.getTypeScriptPath();\r\n        const json = JSON.parse(FS.readFileSync(Path.join(tsPath, '..', 'package.json'), 'utf8'));\r\n        return json.version;\r\n    }\r\n\r\n    /**\r\n     * Run the converter for the given set of files and return the generated reflections.\r\n     *\r\n     * @param src  A list of source that should be compiled and converted.\r\n     * @returns An instance of ProjectReflection on success, NULL otherwise.\r\n     */\r\n    public convert(src: string[]): ProjectReflection {\r\n        this.logger.writeln('Using TypeScript %s from %s', this.getTypeScriptVersion(), this.getTypeScriptPath());\r\n\r\n        const result = this.converter.convert(src);\r\n        if (result.errors && result.errors.length) {\r\n            this.logger.diagnostics(result.errors);\r\n            if (this.ignoreCompilerErrors) {\r\n                this.logger.resetErrors();\r\n                return result.project;\r\n            } else {\r\n                return null;\r\n            }\r\n        } else {\r\n            return result.project;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param src  A list of source files whose documentation should be generated.\r\n     */\r\n    public generateDocs(src: string[], out: string): boolean;\r\n\r\n    /**\r\n     * @param project  The project the documentation should be generated for.\r\n     */\r\n    public generateDocs(project: ProjectReflection, out: string): boolean;\r\n\r\n    /**\r\n     * Run the documentation generator for the given set of files.\r\n     *\r\n     * @param out  The path the documentation should be written to.\r\n     * @returns TRUE if the documentation could be generated successfully, otherwise FALSE.\r\n     */\r\n    public generateDocs(input: any, out: string): boolean {\r\n        const project = input instanceof ProjectReflection ? input : this.convert(input);\r\n        if (!project) {\r\n            return false;\r\n        }\r\n\r\n        out = Path.resolve(out);\r\n        this.renderer.render(project, out);\r\n        if (this.logger.hasErrors()) {\r\n            this.logger.error('Documentation could not be generated due to the errors above.');\r\n        } else {\r\n            this.logger.success('Documentation generated at %s', out);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @param src  A list of source that should be compiled and converted.\r\n     */\r\n    public generateJson(src: string[], out: string): boolean;\r\n\r\n    /**\r\n     * @param project  The project that should be converted.\r\n     */\r\n    public generateJson(project: ProjectReflection, out: string): boolean;\r\n\r\n    /**\r\n     * Run the converter for the given set of files and write the reflections to a json file.\r\n     *\r\n     * @param out  The path and file name of the target file.\r\n     * @returns TRUE if the json file could be written successfully, otherwise FALSE.\r\n     */\r\n    public generateJson(input: any, out: string, linkPrefix?: string): boolean {\r\n        const project = input instanceof ProjectReflection ? input : this.convert(input);\r\n        if (!project) {\r\n            return false;\r\n        }\r\n\r\n        out = Path.resolve(out);\r\n        const eventData = { outputDirectory: Path.dirname(out), outputFile: Path.basename(out) };\r\n        const ser = this.serializer.projectToObject(project, { begin: eventData, end: eventData });\r\n        const prettifiedJson = this.prettifyJson(ser, project, linkPrefix);\r\n        writeFile(out, JSON.stringify(prettifiedJson, null, '\\t'), false);\r\n        this.logger.success('JSON written to %s', out);\r\n\r\n        return true;\r\n    }\r\n\r\n    private prettifyJson(obj: any, project: ProjectReflection, linkPrefix?: string) {\r\n        let getHighlighted = function (text, lang) {\r\n            try {\r\n                if (lang) {\r\n                    return highlight.highlight(lang, text).value;\r\n                } else {\r\n                    return highlight.highlightAuto(text).value;\r\n                }\r\n            } catch (error) {\r\n                this.application.logger.warn(error.message);\r\n                return text;\r\n            }\r\n        };\r\n        marked.setOptions({\r\n            highlight: function (code, lang) {\r\n                return getHighlighted(code, lang);\r\n            }\r\n        });\r\n        let linkParser: LinkParser = new LinkParser(project, linkPrefix);\r\n        let nodeList = [];\r\n        let visitChildren = (json, path) => {\r\n            if (json != null) {\r\n                let comment = json.comment;\r\n                if (json.name === project.name) {\r\n                    json.name = '';\r\n                }\r\n                if (comment && comment.shortText != null && json.name !== project.name) {\r\n                    let markedText = marked(comment.shortText + (comment.text ? '\\n' + comment.text : ''));\r\n                    let type = '';\r\n\r\n                    let constrainedValues = this.generateConstrainedValues(json);\r\n                    let miscAttributes = this.generateMiscAttributes(json);\r\n                    if (json.type && json.type.name) {\r\n                        type = json.type.name;\r\n                    }\r\n                    let notSupportedInValues = json.notSupportedIn ? json.notSupportedIn : '';\r\n                    nodeList.push({\r\n                        name: path + json.name,\r\n                        notSupportedIn: notSupportedInValues,\r\n                        comment: linkParser.parseMarkdown(markedText),\r\n                        type,\r\n                        constrainedValues,\r\n                        miscAttributes\r\n                    });\r\n                }\r\n                if (json.children != null && json.children.length > 0) {\r\n                    let newPath = path + json.name;\r\n\r\n                    // when using relative path and entering a new module,\r\n                    // the first child is an empty node where the name is the path.\r\n                    if (newPath.match('^\".*\"$') && json.comment == null) {\r\n                        newPath = '';\r\n                    }\r\n\r\n                    if (newPath !== '') {\r\n                        newPath += '.';\r\n                    }\r\n                    json.children.forEach(child => visitChildren(child, newPath));\r\n                }\r\n            }\r\n        };\r\n        visitChildren(obj, '');\r\n        return nodeList;\r\n    }\r\n\r\n    private generateConstrainedValues(str: any) {\r\n        let constrainedValues = [];\r\n\r\n        if (str && str['type'] && str['type'].type === 'union') {\r\n            if (str.type.types[1] && str.type.types[1].elementType && str.type.types[1].elementType.types) {\r\n                constrainedValues = str.type.types[1].elementType.types.map(function (type) {\r\n                    return type.value;\r\n                });\r\n                if (str.type.types[0].type && str.type.types[0].type.toLowerCase() === 'array') {\r\n                    let copy = [];\r\n                    for (let i = 0; i < constrainedValues.length; i++) {\r\n                        copy[i] = constrainedValues.slice(0, i + 1).join(',');\r\n                    }\r\n                    constrainedValues = copy;\r\n                }\r\n                constrainedValues = constrainedValues.slice(0, 4);\r\n            }\r\n        }\r\n\r\n        return constrainedValues;\r\n    }\r\n\r\n    private generateMiscAttributes(str: any) {\r\n        let otherMiscAttributes = {};\r\n        if (str.defaultValue) {\r\n            const required = str.defaultValue.match(/required\\s*:\\s([a-zA-Z]+)\\s*/);\r\n            if (required) {\r\n                otherMiscAttributes['required'] = required[1];\r\n            }\r\n            let defaultOptionValue = str.defaultValue.match(/defaultValue\\s*:\\s([a-zA-Z0-9()'\"]+)\\s*/);\r\n            if (defaultOptionValue) {\r\n                defaultOptionValue[1] = defaultOptionValue[1].replace('l(', '');\r\n                defaultOptionValue[1] = defaultOptionValue[1].replace(')', '');\r\n                defaultOptionValue[1] = defaultOptionValue[1].replace(')', '');\r\n                defaultOptionValue[1] = defaultOptionValue[1].replace(/'/g, '');\r\n                otherMiscAttributes['defaultValue'] = defaultOptionValue[1];\r\n            }\r\n        }\r\n        return otherMiscAttributes;\r\n    }\r\n\r\n    /**\r\n     * Expand a list of input files.\r\n     *\r\n     * Searches for directories in the input files list and replaces them with a\r\n     * listing of all TypeScript files within them. One may use the ```--exclude``` option\r\n     * to filter out files with a pattern.\r\n     *\r\n     * @param inputFiles  The list of files that should be expanded.\r\n     * @returns  The list of input files with expanded directories.\r\n     */\r\n    public expandInputFiles(inputFiles?: string[]): string[] {\r\n        let files: string[] = [];\r\n        const exclude: Array<IMinimatch> = this.exclude ? this.exclude.map(pattern => new Minimatch(pattern)) : [];\r\n\r\n        function isExcluded(fileName: string): boolean {\r\n            return exclude.some(mm => mm.match(fileName));\r\n        }\r\n\r\n        function add(dirname: string) {\r\n            FS.readdirSync(dirname).forEach((file) => {\r\n                const realpath = Path.join(dirname, file);\r\n                if (FS.statSync(realpath).isDirectory()) {\r\n                    add(realpath);\r\n                } else if (/\\.tsx?$/.test(realpath)) {\r\n                    if (isExcluded(realpath.replace(/\\\\/g, '/'))) {\r\n                        return;\r\n                    }\r\n\r\n                    files.push(realpath);\r\n                }\r\n            });\r\n        }\r\n\r\n        inputFiles.forEach((file) => {\r\n            file = Path.resolve(file);\r\n            if (FS.statSync(file).isDirectory()) {\r\n                add(file);\r\n            } else if (!isExcluded(file)) {\r\n                files.push(file);\r\n            }\r\n        });\r\n\r\n        return files;\r\n    }\r\n\r\n    /**\r\n     * Print the version number.\r\n     */\r\n    public toString() {\r\n        return [\r\n            '',\r\n            'TypeDoc ' + Application.VERSION,\r\n            'Using TypeScript ' + this.getTypeScriptVersion() + ' from ' + this.getTypeScriptPath(),\r\n            ''\r\n        ].join(typescript.sys.newLine);\r\n    }\r\n}\r\n"]}